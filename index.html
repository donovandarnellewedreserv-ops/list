<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Accès invités — Darnelle & Donovan</title>
  <style>
    :root{
      --accent:#b37c00;
      --muted:#7a6b5f;
      --card-bg:#fffaf6;
      --maxw:900px;
    }
    html,body{height:100%;margin:0;font-family:"Georgia","Times New Roman",serif;background:linear-gradient(180deg,#fff 0%, #fbfbfb 60%);color:#6a563f}
    .wrap{max-width:var(--maxw);margin:36px auto;padding:20px;}
    .card{background:var(--card-bg);border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.08);padding:28px;border:1px solid rgba(180,140,90,0.12)}
    h1{font-family:"Palace Script","Times New Roman",serif;font-size:44px;color:var(--accent);text-align:center;margin:6px 0 18px}
    p{line-height:1.6}
    .center{text-align:center}
    label{display:block;margin:8px 0 4px;font-weight:600;color:var(--muted)}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid #e5d8c9;font-size:16px;box-sizing:border-box}
    button{background:var(--accent);color:#fff;border:none;padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer;margin-top:12px}
    button.secondary{background:#e9dfd4;color:#6a563f}
    .message{padding:12px;border-radius:10px;margin-top:12px}
    .ok{background:#eaf5ea;color:#2f6f33}
    .no{background:#fdecea;color:#8a2b2b}
    .hidden{display:none}
    .stage{display:none}
    .stage.active{display:block}
    a.driveBtn{
      display:inline-block;
      text-decoration:none;
      background:var(--accent);
      color:#fff;
      padding:12px 18px;
      border-radius:12px;
      font-weight:800;
      margin-top:12px;
    }
    .note{font-size:13px;color:#9a8570;margin-top:14px}
    .warnBox{
      margin-top:12px;
      padding:12px;
      border-radius:10px;
      background:#fff6e6;
      border:1px solid rgba(179,124,0,.25);
      color:#6a563f;
    }
    .warnBox ul{margin:8px 0 0; padding-left:18px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Darnelle & Donovan</h1>

      <!-- STAGE 1 -->
      <section id="stage-1" class="stage active">
        <p class="center">Entrez votre <strong>nom complet</strong> pour accéder aux informations du mariage.</p>
        <label for="fullname">Nom complet</label>
        <input id="fullname" type="text" autocomplete="off" placeholder="Ex: Isaac Admeus" />
        <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
          <button id="checkBtn">Valider</button>
          <button id="resetBtn" class="secondary">Effacer</button>
        </div>
        <div id="status" class="hidden message"></div>
        <div class="note">
          Astuce : l’orthographe doit correspondre. (Majuscules/minuscules ne comptent pas.)
        </div>
      </section>

      <!-- STAGE 2 -->
      <section id="stage-2" class="stage">
        <div class="message ok">
          <strong>Accès autorisé ✅</strong>
          <p id="welcome" style="margin:8px 0 0"></p>
        </div>

        <div class="warnBox">
          <strong>Avant d’ouvrir le dossier, veuillez bien lire :</strong>
          <ul>
            <li>Les informations sur <strong>le lieu et la date</strong> de la cérémonie.</li>
            <li>Le <strong>dress code</strong>.</li>
            <li>La <strong>note de confirmation</strong> (numéro/consignes pour confirmer votre présence).</li>
          </ul>
          <div style="margin-top:8px">
            Merci de lire attentivement toutes les informations.
          </div>
        </div>

        <div class="center">
          <a id="driveLink" class="driveBtn"
             href="https://drive.google.com/drive/folders/1FM5cdniqUtGn6-FgL7kI8PR81YIj6DPK?usp=sharing"
             target="_blank" rel="noopener noreferrer">
            Ouvrir le dossier Drive
          </a>
          <div style="margin-top:10px">
            <button id="backBtn" class="secondary">Retour</button>
          </div>
        </div>

        <div class="note center">
          Remarque : l’accès réel au contenu dépend des réglages de partage Google Drive.
        </div>
      </section>
    </div>
  </div>

  <script>
    function normalizeName(s){
      if(!s) return '';
      const t = s.trim().replace(/\s+/g,' ').toLowerCase();
      return t.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
    }

    // Liste actuelle (tu la mettras à jour plus tard)
    const allowedNamesRaw = [
      "Isaac Admeus"
    ];
    const allowedSet = new Set(allowedNamesRaw.map(n => normalizeName(n)));

    const el = id => document.getElementById(id);
    const stages = ["stage-1","stage-2"];
    function showStage(id){
      stages.forEach(s => el(s).classList.toggle("active", s === id));
      window.scrollTo({top:0,behavior:"smooth"});
    }

    const fullname = el("fullname");
    const checkBtn = el("checkBtn");
    const resetBtn = el("resetBtn");
    const status = el("status");
    const welcome = el("welcome");
    const backBtn = el("backBtn");

    function checkName(){
      const v = fullname.value || "";
      const n = normalizeName(v);

      if(!n){
        status.className = "message no";
        status.textContent = "Veuillez entrer votre nom complet.";
        status.classList.remove("hidden");
        return;
      }

      if(allowedSet.has(n)){
        status.classList.add("hidden");
        welcome.textContent = `Bienvenue ${v.trim()} !`;
        showStage("stage-2");
      } else {
        status.className = "message no";
        status.textContent = `Désolé, "${v}" n'est pas sur la liste des invité·e·s.`;
        status.classList.remove("hidden");
      }
    }

    checkBtn.addEventListener("click", checkName);
    fullname.addEventListener("keydown", (e)=>{ if(e.key==="Enter") checkName(); });
    resetBtn.addEventListener("click", ()=>{ fullname.value=""; status.classList.add("hidden"); fullname.focus(); });
    backBtn.addEventListener("click", ()=> showStage("stage-1"));

    // Dissuasion basique (ne bloque pas à 100%)
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("keydown", (e)=>{
      if((e.ctrlKey || e.metaKey) && (e.key==="s"||e.key==="S"||e.key==="p"||e.key==="P")) e.preventDefault();
    });
  </script>
</body>
</html>
